<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>石破内閣 政策評価ダッシュボード</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            background-color: #f1f5f9;
        }
        .content-box {
            background: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .policy-card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
        }
        .policy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .control-btn.active {
            background-color: #38bdf8;
            color: white;
        }
        .control-btn.active.asc::after { content: ' ▲'; }
        .control-btn.active.desc::after { content: ' ▼'; }
        .analysis-content { display: none; }
        .analysis-content.active { display: block; }
        .chart-canvas {
             position: relative;
             height: 400px;
             width: 100%;
        }
        /* AI Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            cursor: pointer;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <main class="flex-grow">
    <div class="max-w-7xl mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800">石破内閣 政策評価ダッシュボード</h1>
            <p class="text-slate-600 mt-2">2024年10月〜2025年6月の主要政策の分析</p>
        </header>

        <!-- Metrics & Controls Section -->
        <section class="content-box mb-8">
             <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                 <div class="text-center p-2">
                     <h3 class="text-lg font-semibold text-slate-600">総合評価</h3>
                     <div id="overall-avg-icon" class="w-16 h-16 mx-auto my-2"></div>
                     <p id="overall-avg" class="text-4xl font-bold text-sky-600 mt-1">-</p>
                 </div>
                 <div class="text-center p-2">
                     <h3 class="text-lg font-semibold text-slate-600">最高評価分野</h3>
                     <p id="best-field" class="text-xl font-bold text-emerald-600 mt-2">-</p>
                 </div>
                 <div class="text-center p-2">
                     <h3 class="text-lg font-semibold text-slate-600">最低評価分野</h3>
                     <p id="worst-field" class="text-xl font-bold text-red-600 mt-2">-</p>
                 </div>
                 <div class="text-center p-2">
                     <h3 class="text-lg font-semibold text-slate-600">政策項目数</h3>
                     <p id="policy-count" class="text-4xl font-bold text-slate-700 mt-2">-</p>
                 </div>
             </div>
            <div class="flex flex-wrap justify-end space-x-2 md:space-x-4">
                <button id="aiAnalysisBtn" class="control-btn px-4 py-2 bg-indigo-600 text-white rounded-md shadow-sm hover:bg-indigo-700 transition-colors">AI分析</button>
                <button id="toggleAnalysisBtn" class="control-btn px-4 py-2 bg-purple-600 text-white rounded-md shadow-sm hover:bg-purple-700 transition-colors">総合評価・分析を表示</button>
                <button id="exportBtn" class="px-4 py-2 bg-emerald-600 text-white rounded-md shadow-sm hover:bg-emerald-700 transition-colors">Excelファイルで出力</button>
            </div>
            <p class="text-xs text-slate-500 mt-4 text-right">
                注：政策評価は、個別の政策に対する、石破首相の過去の言動や政治姿勢との整合性を総合的に判断した評価であり、政策自体の評価とは異なるものである。
            </p>
        </section>
        
        <!-- Analysis Section (hidden by default) -->
        <div id="analysis-wrapper" class="hidden">
            <section class="content-box mb-8">
                 <div class="flex flex-wrap gap-2 border-b-2 border-slate-200 pb-4 mb-4">
                     <button class="control-btn chart-toggle-btn px-3 py-1 border rounded-full text-sm" data-chart="evaluation">総合評価</button>
                     <button class="control-btn chart-toggle-btn px-3 py-1 border rounded-full text-sm" data-chart="methodology">分析手法</button>
                     <button class="control-btn chart-toggle-btn px-3 py-1 border rounded-full text-sm" data-chart="radar">レーダーチャート</button>
                     <button class="control-btn chart-toggle-btn px-3 py-1 border rounded-full text-sm" data-chart="bar">棒グラフ</button>
                     <button class="control-btn chart-toggle-btn px-3 py-1 border rounded-full text-sm" data-chart="line">時系列推移</button>
                     <button class="control-btn chart-toggle-btn px-3 py-1 border rounded-full text-sm" data-chart="scatter">相関図</button>
                 </div>
                 <div id="evaluation-text" class="analysis-content prose max-w-none p-2">
                     <h3 class="text-xl font-bold text-slate-800 mb-4">総合評価</h3>
                     <p>石破内閣の政策運営は、総合平均評価点59.1点という結果である。これは、特定の得意分野での高評価と、政権運営の基盤となる政治力の著しい低評価が相殺し合った結果と言える。</p>
                     <p>最も評価が高いのは「安全保障」(75.1点)、「科学技術」(71.8点)、「地方創生」(71.7点)である。これらは首相自身のライフワークや専門性が反映された分野であり、「防衛費増額」や「H3ロケット成功」など、具体的で一貫性のある政策が高評価に繋がった。特に、過去の発言との整合性が高い政策ほど評価も高くなる傾向が明確であり、「有言実行」が評価の鍵であることが示されている。</p>
                     <p>一方で、「政治力」(47.1点)の評価は極めて低い。これは2024年10月の衆院選における与党過半数割れが構造的な弱点となり、国会運営で野党への譲歩を余儀なくされる場面が多発したことが主因である。加えて、2025年3月の「新人議員への商品券配布問題」(5点)のようなスキャンダルは、「正直・公正」という政権の信条を大きく傷つけ、評価を致命的に押し下げた。</p>
                     <p>また、「環境」分野では、原発政策の180度転換が過去の発言との「完全矛盾」と判断され、20点台という厳しい評価を受けた。これは、政策変更の際に国民への丁寧な説明を欠いたことが、いかに信頼を損なうかを示す象徴的な事例である。</p>
                     <p>時系列で見ると、政権発足直後の期待感は長続きせず、選挙の失敗とスキャンダルで支持が急落。その後、「骨太方針」策定などで一時的に持ち直す局面も見られたが、政権基盤の脆弱性から、力強い政策遂行能力を発揮できず、全体として低空飛行を続けているのが現状である。</p>
                 </div>
                 <div id="methodology-text" class="analysis-content prose max-w-none p-2">
                     <h3 class="text-xl font-bold text-slate-800 mb-4">分析手法について</h3>
                     <p>このダッシュボードの評価は、以下の3つの主要な指標を基にAIが総合的に算出している。</p>
                     <ol>
                         <li><strong>政策の一貫性 (Consistency):</strong> 過去の発言や公約と、実際の政策との整合性を評価する。「A(完全一致)」から「D(完全矛盾)」までの段階で評価し、一貫性の高い政策は信頼性が高いと判断される。</li>
                         <li><strong>政策の実現可能性と影響 (Feasibility and Impact):</strong> 政策が現実的に達成可能か、また社会や経済に与えるポジティブおよびネガティブな影響を分析する。財源の有無、社会的合意形成の難易度、国際情勢などが考慮される。</li>
                         <li><strong>客観的成果と課題 (Objective Outcomes):</strong> 政策実行後の具体的な成果（例: 賃上げ率、法案成立）と、それによって生じた新たな課題や批判（例: 格差拡大、支持率低下）を客観的に評価する。</li>
                     </ol>
                     <p>これらの指標を基に、各政策項目を100点満点で評価し、ダッシュボード上の各種グラフや分析コメントを生成している。評価の算出ロジックは継続的にアップデートされる。</p>
                 </div>
                 <div id="radar-container" class="analysis-content chart-canvas"><canvas id="radarChart"></canvas></div>
                 <div id="bar-container" class="analysis-content chart-canvas"><canvas id="barChart"></canvas></div>
                 <div id="line-container" class="analysis-content chart-canvas"><canvas id="lineChart"></canvas></div>
                 <div id="scatter-container" class="analysis-content chart-canvas"><canvas id="scatterChart"></canvas></div>
            </section>
        </div>
        
        <section class="content-box">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">政策リスト</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <select id="mainFieldFilter" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500"></select>
                <select id="subFieldFilter" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500"></select>
                <input type="text" id="searchInput" placeholder="キーワードで検索..." class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500">
            </div>

             <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
                 <div id="sort-controls" class="flex flex-wrap gap-2">
                     <span class="font-semibold self-center">並べ替え:</span>
                     <button class="control-btn sort-btn px-3 py-1 border rounded-full text-sm" data-sort-key="date">日付</button>
                     <button class="control-btn sort-btn px-3 py-1 border rounded-full text-sm" data-sort-key="policy">政策名</button>
                     <button class="control-btn sort-btn px-3 py-1 border rounded-full text-sm" data-sort-key="score">評価点</button>
                     <button class="control-btn sort-btn px-3 py-1 border rounded-full text-sm" data-sort-key="consistency">整合性</button>
                 </div>
                 <div id="filter-results" class="font-semibold text-slate-700 text-lg"></div>
             </div>

            <div id="policy-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>
    </div>
    </main>
    <footer class="text-center text-xs text-slate-500 p-4 mt-8">
        <p id="footer-text"></p>
    </footer>

    <!-- AI Analysis Modal -->
    <div id="ai-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="modal-close-btn" class="modal-close-btn text-gray-500 hover:text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h2 class="text-2xl font-bold text-slate-800 mb-4">AI分析機能</h2>
            
            <div class="mb-6">
                <label for="api-key-input" class="block text-sm font-medium text-gray-700 mb-1">Google AI APIキー</label>
                <div class="flex items-center space-x-2">
                    <input type="password" id="api-key-input" class="flex-grow p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="APIキーを入力...">
                    <button id="save-api-key-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-md shadow-sm hover:bg-indigo-700 transition-colors">保存</button>
                </div>
                <div id="api-key-status" class="text-sm text-green-600 mt-1 h-4"></div>
            </div>

            <div class="mb-4 p-4 border border-gray-200 rounded-lg">
                <h3 class="font-semibold text-lg mb-2">総合分析サマリー</h3>
                <p class="text-sm text-gray-600 mb-3">ボタンをクリックすると、全政策データのサマリーをAIが生成します。</p>
                <button id="run-ai-analysis-btn" class="w-full px-4 py-2 bg-emerald-600 text-white rounded-md shadow-sm hover:bg-emerald-700 transition-colors disabled:bg-gray-400">総合分析を実行</button>
            </div>

            <div class="mb-4 p-4 border border-gray-200 rounded-lg">
                <h3 class="font-semibold text-lg mb-2">AIに質問する</h3>
                 <textarea id="ai-question-input" rows="3" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="政策データに関する質問を自由に入力してください...（例：安全保障分野で評価の高い政策は何ですか？）"></textarea>
                <button id="ask-ai-btn" class="mt-2 w-full px-4 py-2 bg-sky-600 text-white rounded-md shadow-sm hover:bg-sky-700 transition-colors disabled:bg-gray-400">質問を送信</button>
            </div>

            <div id="ai-result-container" class="mt-4 p-4 border border-gray-200 rounded-md bg-gray-50 min-h-[200px] prose max-w-none">
                <div id="ai-loader" class="loader hidden"></div>
                <div id="ai-result-text" class="text-slate-700">ここに分析・回答結果が表示されます。</div>
            </div>

            <div class="mt-6 p-3 bg-slate-100 rounded-md text-sm text-slate-600">
                <h4 class="font-bold mb-2">Google AIの無料APIキーを取得する方法</h4>
                <p>この機能を利用するには、Google AIのAPIキーが必要です。以下の手順で無料で取得できます。</p>
                <ol class="list-decimal list-inside mt-2 space-y-1">
                    <li><a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Google AI Studio</a> にアクセスし、Googleアカウントでログインします。</li>
                    <li>「Create API key in new project」ボタンをクリックして、新しいAPIキーを生成します。</li>
                    <li>生成されたAPIキーをコピーし、上の入力欄に貼り付けて「保存」してください。</li>
                </ol>
                <p class="mt-2">※ APIの利用はGoogleの利用規約に従ってください。このウェブサイトはAPIキーをサーバーに保存しません。</p>
            </div>
        </div>
    </div>


    <script type="module">
        // --- Data ---
        // The complete data source with all policy items.
        const policyDataText = `
| 2025/6/22 | 政治力 | 選挙公約 | 参院選に向けた選挙公約を発表 | 50 | 35 | C | ✓ | 部分的な矛盾：国民生活の安定を最優先としながら、財源が不透明な政策を多数提示 | 選挙勝利に向け、幅広い層にアピールする政策を網羅的に提示 | 財源の裏付けが乏しい「バラマキ」との批判が集中。具体性に欠け、実現可能性に大きな疑問符 | 参院選対策 |
| 2025/6/21 | 政治力 | 政治改革: 憲法 | 憲法改正議論の推進を表明 | 70 | 65 | A | ✓ | 完全一致: 長年の持論である憲法改正論 | 憲法審査会の活性化を促し、自身の信条である改憲議論を前進 | 少数与党では国民的合意形成は極めて困難。実現可能性が大幅に低下 | 政治状況変化で実現困難 |
| 2025/6/21 | 経済 | 財政: 財政再建 | プライマリーバランス黒字化目標の新たな達成年限を「2030年代初頭」に設定 | 48 | 35 | C | ✓ | 部分的矛盾: 財政規律重視を標榜しながら目標後退 | 現実的な経済状況を踏まえた目標設定の修正 | 事実上の目標先送りで財政規律への信頼失墜。「責任ある政治」との整合性に疑問 | 財政規律の後退 |
| 2025/6/21 | 地方創生 | 地方創生 | ふるさと納税制度の大幅な見直しに着手 | 65 | 70 | A | ✓ | 完全一致: 地方格差是正への一貫した取り組み | 過度な返礼品競争を是正し、制度本来の趣旨である地方応援に立ち返る | 一部自治体から強い反発を招き、地方との調整が難航 | 地方創生の一環 |
| 2025/6/21 | 経済 | 労働・賃金 | 「同一労働同一賃金」の履行状況に関する初の全国調査結果を公表 | 70 | 75 | A | ✓ | 完全一致: 格差是正への一貫した姿勢 | 格差是正に向けた政策効果を可視化し、具体的な課題を明確化 | 依然として多くの企業で履行が不十分であることが判明 | 労働政策の継続 |
| 2025/6/20 | 政治力 | 政権運営: 国会 | 重要法案を成立させるも、野党に大幅譲歩 | 60 | 45 | C | ✓ | 部分的矛盾: 強いリーダーシップを標榜しながら譲歩 | 少数与党でも経済安保法案など重要法案を会期内に成立 | 野党要求を大幅受入れた修正案となり、リーダーシップ不足を露呈 | 少数与党の制約 |
| 2025/6/20 | 安全保障 | 安全保障: 協力 | 日英円滑化協定(RAA)に基づく初の共同訓練を実施 | 82 | 82 | A | ✓ | 完全一致: 多層的安全保障協力の実現 | 欧州の主要パートナーとの安保協力を具体化し、抑止力を多層的に強化 | 訓練規模が限定的で、象徴的な意味合いが強いとの見方も | 安保協力の成果 |
| 2025/6/20 | 科学技術 | 科学技術: 研究開発 | 「科学技術立国」再興のための基本法案を閣議決定 | 80 | 80 | A | ✓ | 完全一致: 技術立国論は一貫した立場 | 研究開発予算のGDP比目標を明記し、長期的な支援体制を構築 | 短期的な成果を求める風潮転換の実効性は未知数 | 科学技術政策継続 |
| 2025/6/20 | 科学技術 | 科学技術: 宇宙 | 宇宙デブリ除去技術の実証衛星打ち上げに成功 | 82 | 82 | A | ✓ | 完全一致: 宇宙開発重視は継続 | 持続可能な宇宙利用に向け、日本の先端技術力を世界に実証 | ビジネス化には国際的なルール作りが不可欠 | 技術的成果 |
| 2025/6/19 | 政治力 | 政権運営: 支持率 | 内閣改造を示唆し、求心力回復を図る | 55 | 40 | C | ✓ | 部分的矛盾: 安定政権運営を標榜しながら改造示唆 | 支持率回復に向けた人心一新への期待感醸成 | 少数与党の根本的問題解決にならない小手先対応との批判 | 支持率低迷対策 |
| 2025/6/19 | 環境 | 環境 | プラスチック資源循環促進法に基づき、初の企業名公表 | 70 | 68 | B | ✓ | 概ね一致: 環境政策重視の姿勢 | リサイクル率の低い企業名を公表し、自主的な取り組みを促進 | 企業の評判を損なう「晒し上げ」的手法との批判も | 環境政策実施 |
| 2025/6/19 | 環境 | エネルギー | 洋上風力発電の導入目標を上方修正 | 72 | 65 | B | ✓ | 概ね一致: 再エネ推進（原発政策とは矛盾） | 再生可能エネルギーの主力電源化に向けた意欲的な目標設定 | 漁業関係者との調整や送電網整備が追いついていない | 再エネ推進継続 |
| 2025/6/18 | 政治力 | 政権運営: 選挙 | 参院選準備本部を設置 | 65 | 50 | B | ✓ | 概ね一致: 選挙への備えは当然 | 早期から選挙準備に着手し、組織的対応を開始 | 支持率が低迷したままでの選挙準備で危機感が露呈 | 選挙対策 |
| 2025/6/18 | 環境 | 防災・復興 | 南海トラフ地震の被害想定を更新、新たな対策計画を指示 | 78 | 78 | A | ✓ | 完全一致: 防災重視は一貫した姿勢 | 最新の科学的知見に基づき、防災計画の見直しに着手 | 対策に必要な予算規模が巨大で、財源確保の目処が立たない | 防災政策継続 |
| 2025/6/17 | 外交 | 外交: 対中政策 | 王毅外相と電話会談、関係安定化で一致 | 62 | 60 | B | ✓ | 概ね一致: 対中対話重視は防衛相時代から継続 | 緊張緩和に向けた対話チャンネルの維持で現実的外交を展開 | 台湾や尖閣を巡る根本的な対立構造に変化はなし | 対中外交継続 |
| 2025/6/17 | 環境 | 環境 | カーボンプライシング導入の具体案を提示 | 65 | 60 | B | ✓ | 概ね一致: 環境政策への取り組み | 炭素排出に価格を付け、企業の脱炭素行動を促進する重要な施策 | 産業界からの強い反発で導入時期や価格水準で大幅譲歩 | 環境政策実施 |
| 2025/6/16-17 | 外交 | 多国間 | G7サミット（カナダ）に参加、対米関税協議継続 | - | 55 | B | ✓ | 概ね一致: 多国間外交重視 | トランプ大統領との30分間会談を実現し、関税問題で協議継続を確認 | 関税問題で具体的な進展なし。「認識の不一致が残る」と成果限定的 | 新規追加項目 |
| 2025/6/16 | 安全保障 | 外交: 多国間 | G7でイスラエル問題を協議 | 60 | 55 | B | ✓ | 概ね一致: 国際協調重視の姿勢 | 国際平和への貢献姿勢を示し、多国間外交に積極参加 | 日本の影響力は限定的で具体的成果に乏しい | 多国間外交 |
| 2025/6/16 | 科学技術 | 科学技術: AI | 国産大規模言語モデル(LLM)開発に1000億円の追加支援 | 78 | 78 | A | ✓ | 完全一致: 技術安全保障重視は一貫 | 経済安全保障の観点から、AI技術の国内基盤を強化 | 米国巨大IT企業との開発競争で周回遅れの感は否めない | AI戦略継続 |
| 2025/6/15 | 安全保障 | 外交: 多国間 | G7サミットに参加 | 45 | 40 | C | △ | 部分的矛盾: 事前調整不足は外交センスの問題 | 主要国首脳との関係維持で日本の存在感を示す | 事前調整不足で各国との共同声明に齟齬が生じ、外交力不足を露呈 | 外交調整不足 |
| 2025/6/15 | 社会保障 | 年金 | 年金制度改革法案、衆院で与野党対立の末に可決 | 35 | 25 | C | ✓ | 部分的矛盾: 社会保障重視を標榜しながら強行 | 将来の制度持続性確保に向け、困難な決断を実行 | 国民理解を得られず支持率がさらに低下。強行採決で国会に禍根を残す | 年金改革の課題 |
| 2025/6/14 | 政治力 | 政治改革: 憲法 | 憲法審査会での緊急事態条項の議論を主導 | 72 | 60 | A | ✓ | 完全一致: 緊急事態条項は長年の持論 | 大規模災害や有事への備えとして、具体的な条文案の議論を前進 | 人権制約への懸念が根強く、野党や市民団体から強い反発 | 憲法改正議論 |
| 2025/6/13 | 経済 | 財政: 基本方針 | 骨太方針2025「今日より明日はよくなると実感できる社会へ」を閣議決定 | - | 85 | A | ✓ | 完全一致: 経済政策重視は一貫した立場 | 石破政権初の骨太方針として「賃上げと投資がけん引する成長型経済」を明確化。医療・介護処遇改善、防衛費GDP比2%目標なども明記 | 具体的な財源確保策や実現手段が不明確。理念先行で実効性に課題 | 最重要・新規追加 |
| 2025/6/13 | 経済 | 財政: 税制 | NISA拡充後の効果検証会合を設置 | 65 | 65 | B | ✓ | 概ね一致: 「貯蓄から投資へ」の流れ推進 | 「貯蓄から投資へ」の流れを加速させるための次の施策検討 | 富裕層優遇との批判に対し、十分な説明ができていない | 投資促進政策 |
| 2025/6/13 | 環境 | エネルギー | 次世代革新炉（SMR）の実証炉建設地を決定 | 70 | 35 | D | ✓ | 完全矛盾: 脱原発論から原発推進への転換 | 原子力の新たな活用方法として、将来のエネルギー選択肢を拡大 | 脱原発から推進への説明なき転換。地元の安全性への不安は根強い | 原発政策転換 |
| 2025/6/12 | 教育 | 教育: ICT | 教育DX推進のため、全公立小中学校にAIドリル導入 | 75 | 75 | A | ✓ | 完全一致: ICT教育推進は一貫 | 個別最適化された学びを提供し、教育格差の是正を目指す | 教員のITスキル不足や、インフラ整備の地域差が課題 | 教育DX推進 |
| 2025/6/11 | 社会保障 | 医療・介護 | 認知症基本法に基づき、初の国家戦略を策定 | 80 | 80 | A | ✓ | 完全一致: 社会保障制度充実への取り組み | 予防から共生までを包括した長期的なビジョンを明示 | 介護人材の不足など、現場レベルでの課題は山積 | 社会保障政策 |
| 2025/4/9 | 農政 | 食料安保 | 記録的な米不足への対応の遅れ | 40 | 30 | C | ✓ | 部分的矛盾: 危機管理能力への疑問 | 緊急輸入や備蓄米の放出を最終的に決定 | 政府の需給見通しの甘さが露呈し、対応が後手に回り価格高騰を招く | 危機対応の遅れ |
| 2025/6/10 | 安全保障 | 防衛: 予算・装備 | 次期主力戦闘機の共同開発計画で追加予算 | 70 | 70 | A | ✓ | 完全一致: 防衛力強化への一貫した取り組み | 将来の防空能力を確保するための重要な投資を継続 | 開発コストが当初の想定より高騰し、財政圧迫 | 防衛政策継続 |
| 2025/6/10 | その他 | 防災・復興 | 首都直下地震に備え、帰宅困難者対策を強化 | 77 | 77 | A | ✓ | 完全一致: 防災対策重視は一貫 | 企業への備蓄義務付けや一時滞在施設の拡充など実効性のある対策 | 対策の実施は企業の自主性に委ねられる部分が大きい | 防災対策強化 |
| 2025/6/10 | 社会保障 | 医療・介護 | 遠隔医療の保険適用を拡大 | 57 | 60 | B | ✓ | 概ね一致: 医療制度改革への取り組み | 医療へのアクセス格差を是正し、地方の医療環境を改善 | 医療の質の管理や高齢者のデジタル格差が課題 | 医療制度改革 |
| 2025/6/9 | 安全保障 | 安全保障: 協力 | QUAD首脳会合を主催 | 80 | 80 | A | ✓ | 完全一致: 多国間安保協力の重視 | 日本のリーダーシップを発揮し、海洋安保やワクチン供給で具体的協力策 | 中国は「排他的ブロック」と強く反発し、地域の緊張要因も | QUAD主導成功 |
| 2025/6/8 | 経済 | 経済: 成長戦略 | 大阪万博の準備遅延に対し、政府直轄チームを派遣 | 60 | 55 | B | ✓ | 概ね一致: 危機管理への対応 | 国家的プロジェクトの失敗回避のため、強いリーダーシップを発揮 | 対応の遅れが指摘され、当初からの計画の甘さを露呈 | 万博対応 |
| 2025/6/7 | 科学技術 | 科学技術: 研究開発 | 量子コンピュータ開発で日米共同プロジェクトを発表 | 75 | 75 | A | ✓ | 完全一致: 日米技術協力重視 | 次世代の計算技術で覇権を握るため、同盟国と戦略的協力 | 巨額の投資が必要で、実用化までの道のりは長い | 量子技術協力 |
| 2025/6/6 | 経済 | 成長戦略 | 新しい資本主義実行計画2025年改訂版を決定 | - | 80 | A | ✓ | 完全一致: 新しい資本主義への取り組み継続 | 最低賃金1500円目標を再確認し、中小企業の生産性向上に60兆円投資計画。賃金向上推進5か年計画を策定 | 最低賃金目標の実現可能性は依然として疑問。中小企業への負担増が懸念 | 重要・新規追加 |
| 2025/6/6 | 経済 | 経済: 金融・為替 | 初の覆面為替介入を実施、一時的に円高に | 70 | 65 | B | ✓ | 概ね一致: 為替安定化への取り組み | 投機的な動きを牽制し、市場に対して一定の効果を発揮 | 効果は長続きせず、根本的な円安要因の解決には至らない | 為替政策実施 |
| 2025/6/5 | 政治力 | 政権運営: 国会 | 経済安保重要法案で野党と修正協議 | 60 | 50 | C | ✓ | 部分的矛盾: リーダーシップと妥協のバランス | 少数与党での対話による合意形成能力を示す | 法案の重要部分が後退し、骨抜きとの批判 | 少数与党の制約 |
| 2025/6/4 | 安全保障 | 防衛: 体制 | 防衛産業サイバーセキュリティ基準を策定 | 78 | 78 | A | ✓ | 完全一致: サイバー防衛重視は一貫 | サプライチェーン全体での情報漏洩リスクに対応し、防衛技術の保護を強化 | 中小企業にとって基準遵守のコストが大きな負担 | サイバー防衛強化 |
| 2025/6/3 | その他 | 人権 | 選択的夫婦別姓の法案提出を見送り | 35 | 20 | D | ✓ | 完全矛盾: 多様性重視を標榜しながら保守派に屈服 | 党内保守派への配慮で政権運営の安定を優先 | 多様な家族観を求める世論の期待を裏切り、支持率低下の一因 | 人権政策後退 |
| 2025/6/2 | 経済 | 労働・賃金 | 70歳までの就業機会確保を企業の努力義務に | 68 | 68 | A | ✓ | 完全一致: 高齢者活用は一貫した政策 | 高齢者の就労意欲に応え、社会の担い手を増やす現実的政策 | 若年層の雇用機会を奪うとの懸念も存在 | 雇用政策継続 |
| 2025/6/1 | 政治力 | 政権運営: 広報 | 就任8ヶ月の実績を記者会見で強調 | 65 | 50 | C | ✓ | 部分的矛盾: 謙虚さを重視しながら自画自賛 | 国民への説明責任を果たそうとする姿勢を示す | 支持率が低迷する中、「自画自賛」との批判も招く | 広報戦略の課題 |
| 2025/6/1 | その他 | 人権 | アイヌ新法を施行、文化復興拠点を整備 | 75 | 75 | A | ✓ | 完全一致: 先住民族権利重視は一貫 | 先住民族の権利擁護と文化伝承に向けた具体的な一歩 | 当事者からは、土地の権利など、より踏み込んだ内容を求める声も | 人権政策実施 |
| 2025/5/30 | 経済 | 経済: 金融・為替 | 円安対策として市場介入を示唆 | 50 | 45 | B | ✓ | 概ね一致: 為替安定化への関心 | 急激な為替変動を抑制しようとする姿勢を市場に示す | 口先介入に留まり、実効性のある対策に欠ける | 為替政策限界 |
| 2025/5/30 | 社会保障 | 少子化対策 | 男性の育休取得率目標を50%に引き上げ | 73 | 70 | A | ✓ | 完全一致: ジェンダー平等推進は一貫 | ジェンダー平等を推進し、女性のキャリア継続を支援する姿勢を明確化 | 中小企業における代替人員の確保が大きな課題 | 少子化対策継続 |
| 2025/5/29 | 科学技術 | デジタル: DX | マイナンバーカードの海外利用実証実験を開始 | 68 | 65 | B | ✓ | 概ね一致: デジタル化推進への取り組み | 海外在住の国民の利便性を向上させる新たな試み | 個人情報の国外での取り扱いについて懸念の声 | デジタル政策継続 |
| 2025/5/28 | 経済 | 労働・賃金 | 特定技能2号の対象分野拡大を決定 | 60 | 58 | B | ✓ | 概ね一致: 外国人材活用は現実的政策 | 深刻な人手不足に対応するため、外国人材の受け入れを拡大 | 国内労働市場への影響や、外国人との社会統合が課題 | 外国人材政策 |
| 2025/5/27 | 科学技術 | デジタル: サイバー | 政府統一クラウド、特定ベンダーへの依存問題が浮上 | 40 | 35 | C | ✓ | 部分的矛盾: デジタル安全保障重視との矛盾 | コスト削減や効率化を目指した政府DXの推進 | 特定企業への依存度が高まり、セキュリティリスクや価格交渉力の低下 | デジタル政策課題 |
| 2025/5/26 | 経済 | 経済: 成長戦略 | 観光立国推進基本計画を改定、富裕層向け戦略を強化 | 72 | 70 | B | ✓ | 概ね一致: 観光立国戦略の継続 | 観光消費額の目標を引き上げ、地方への誘客を促進 | オーバーツーリズム対策が不十分との指摘 | 観光政策継続 |
| 2025/5/25 | 政治力 | 政権運営: 党内 | 高市派との対話を開始 | 65 | 60 | B | ✓ | 概ね一致: 党内融和への努力 | 党内融和を図り、内部の安定化を目指す現実的対応 | 保守派との根本的な政策対立は残存 | 党内調整継続 |
| 2025/5/25 | 経済 | 経済: 成長戦略 | スタートアップ減税（法人税5年免除）導入 | 56 | 60 | B | ✓ | 概ね一致: 成長戦略としてのスタートアップ重視 | 新規開業を促し、経済の新陳代謝を活性化 | 恩恵が一部の企業に偏在するとの指摘 | 成長戦略実施 |
| 2025/5/22 | 社会保障 | 年金 | 年金制度改革の骨子案を提示 | 55 | 45 | C | ✓ | 部分的矛盾: 社会保障重視を標榜しながら給付抑制 | 将来の持続可能性確保に向けた議論を開始 | 給付水準の引き下げや保険料引き上げが盛り込まれ、現役・高齢者双方から強い反発 | 年金改革の困難 |
| 2025/5/21 | 農政 | 政治改革: 人事 | 米不足対策の切り札として小泉進次郎氏を農水相に起用 | 80 | 70 | A | △ | 完全一致: 改革人事への積極姿勢 | 江藤前農水相の失言辞任を受けた緊急起用。国民的人気の高い小泉氏で危機対応 | 根本的な米価問題解決には至らず。備蓄米放出も一時的効果に留まる | 日付修正済 |
| 2025/5/20 | 外交 | 外交: 多国間 | G7財務相会合で円安協調を議論 | 55 | 50 | B | ✓ | 概ね一致: 国際協調重視の姿勢 | 国際協調の姿勢を示し、多国間での政策協調を模索 | 具体的な協調策には至らず、実効性に欠ける | 多国間協調限界 |
| 2025/5/20 | 教育 | 教育: リスキリング | リスキリングを通じた労働移動円滑化支援策 | 65 | 65 | A | ✓ | 完全一致: 人材流動化重視は一貫 | 人手不足が深刻な成長分野への人材供給を促進 | 効果が表れるまで時間がかかり、即効性に欠ける | 人材政策継続 |
| 2025/5/18 | 安全保障 | 防衛: 体制 | 南西諸島の早期警戒レーダー網の更新を発表 | 77 | 77 | A | ✓ | 完全一致: 島嶼防衛重視は一貫 | 島嶼防衛能力を強化し、監視体制を向上させる | 配備地域の地元住民への負担が増加 | 防衛体制強化 |
| 2025/5/16 | 地方創生 | 地方創生 | 関係人口創出のためのデジタル村民制度を全国展開 | 70 | 75 | A | ✓ | 完全一致: 地方創生への一貫した取り組み | 都市住民が地方と継続的に関わる新たな仕組みを構築 | 実質的な経済効果は限定的との見方もある | 地方創生継続 |
| 2025/5/15 | 科学技術 | 科学技術: AI | 生成AIの政府業務利用ガイドラインを策定 | 65 | 65 | A | ✓ | 完全一致: AI活用推進への積極姿勢 | 行政の効率化やサービス向上への期待が高まる | 情報漏洩リスクや、職員のスキル不足が課題 | AI活用推進 |
| 2025/5/14 | 政治力 | 政権運営: 国会 | 問責決議案が参院で可決 | 30 | 25 | - | ✓ | 政治的結果: 少数与党の厳しい現実 | 危機感を共有し、党内結束を促す一部の動き | 国会運営が完全に停滞し、政権の機能不全を印象付けた | 政権運営困難 |
| 2025/5/13 | 経済 | 財政: 税制 | 消費税減税を継続的に否定 | - | 45 | C | ✓ | 部分的矛盾: 生活支援重視と矛盾 | 財政規律と社会保障財源確保を重視する現実的判断 | 物価高に苦しむ国民の期待を裏切り、野党の減税論に対抗できず | 新規追加項目 |
| 2025/5/12 | 社会保障 | 少子化対策 | 少子化対策としてバウチャー導入 | 55 | 60 | A | ✓ | 完全一致: 多様な少子化対策アプローチ | 0〜2歳児に月1万円相当を支給し、子育て世帯の家計を直接支援 | 恒久的な財源が未確定で制度の持続可能性に疑問 | 少子化対策継続 |
| 2025/5/10 | 経済 | 財政: 税制 | ガソリン減税（トリガー条項）発動を見送り | 40 | 30 | C | ✓ | 部分的矛盾: 生活支援重視を標榜しながら見送り | 財源悪化を回避し、財政規律を維持する姿勢を示す | 物価高に苦しむ国民の期待を裏切り、生活支援策として不十分 | 財政規律優先 |
| 2025/5/10 | 環境 | 環境 | 再生可能エネルギー推進を強化 | 70 | 60 | B | ✓ | 概ね一致: 再エネ推進（原発政策とは矛盾） | 地方への再エネ投資を促し、脱炭素社会の実現を加速 | 電力コストの上昇を招く懸念と原発推進との矛盾 | 再エネ政策継続 |
| 2025/5/5 | 外交 | 外交: 二国間(中東) | サウジアラビアを訪問、エネルギー安保で協力合意 | 68 | 65 | B | ✓ | 概ね一致: エネルギー安保重視 | 原油の安定供給確保と、脱炭素技術での協力を約束し、経済関係を強化 | 人権問題に対する言及が乏しく、価値観外交の後退と批判 | 中東外交継続（岩屋外務大臣が交渉） |
| 2025/5/1 | 地方創生 | 地方創生 | 「地方創生2.0」計画（10年2000億円）を発表 | 85 | 85 | A | ✓ | 完全一致: ライフワークとしての地方創生 | 看板政策として若者支援や企業移転促進を盛り込み、地方活性化への強い意志を示す | 効果測定が難しく、実効性に課題も存在 | 地方創生継続 |
| 2025/4/28 | 外交 | 外交: 二国間(アジア) | 日韓首脳会談で関係改善を確認 | 60 | 58 | B | ✓ | 概ね一致: 日韓関係改善への取り組み | 対話継続の姿勢を示すことで、地域の安定に貢献 | 歴史認識問題など、根本的な課題での具体的な進展はなし | 日韓関係継続 |
| 2025/4/25 | 社会保障 | 少子化対策 | 児童手当の所得制限撤廃を決定 | 72 | 70 | B | ✓ | 概ね一致: 少子化対策重視は一貫 | 全ての子供を対象とし、少子化対策を前進させる重要な一歩 | 恒久的な財源が確保されておらず、将来世代への負担増が懸念 | 少子化対策継続 |
| 2025/4/24 | 経済 | 経済: 金融・為替 | 日銀が金融緩和策の修正を示唆 | 60 | 55 | B | ✓ | 概ね一致: 正常化への取り組み | 円安と物価高に対応し、政策転換への道筋をつけた | 市場との対話が不十分で、一時的に株価が急落 | 金融政策調整 |
| 2025/4/22 | 環境 | エネルギー | 柏崎刈羽原発の再稼働を容認する姿勢 | 45 | 25 | D | ✓ | 完全矛盾: 脱原発から推進への転換 | 電力の安定供給を最優先する現実的対応との説明 | 脱原発から推進への説明なき転換。地元の強い反発を招く | 原発政策転換 |
| 2025/4/21 | 政治力 | 政治改革: 資金規正 | 第三者監視委員会設置法が成立 | 76 | 70 | B | ✓ | 概ね一致: 政治改革への取り組み | 外部の目で政治資金をチェックする仕組みを法制化 | 委員会の権限が限定的で、実効性を疑問視する声も | 政治改革継続 |
| 2025/4/20 | 安全保障 | 防衛: 予算・装備 | 装備品の国産化を推進 | 75 | 75 | A | ✓ | 完全一致: 防衛産業基盤強化は一貫 | 国内の防衛産業基盤を強化し、技術的自立性を向上 | コスト増の懸念と技術開発期間の長期化 | 防衛産業強化 |
| 2025/4/18 | 社会保障 | 少子化対策 | N分N乗方式の導入検討を開始 | 60 | 55 | B | ✓ | 概ね一致: 抜本的少子化対策への取り組み | フランスで実績のある抜本的な少子化対策への期待感 | 財源問題や制度の複雑さから、実現へのハードルは高い | 少子化対策検討 |
| 2025/4/15 | 外交 | 外交: 二国間(欧州) | 日独首脳会談、経済安保での連携強化で合意 | 75 | 75 | A | ✓ | 完全一致: 価値観外交重視は一貫 | サプライチェーン強靭化などで具体的な協力パッケージに合意 | 対中政策で若干の温度差が見られた | 日独協力強化 |
| 2025/4/15 | 経済 | 労働・賃金 | 最低賃金1500円目標を再確認 | 65 | 30 | C | ✓ | 部分的矛盾: 目標は一貫するが実現困難 | 賃上げ支援の姿勢を改めて示し、労働者への配慮を強調 | 実現性に重大な疑問。年7.3%上昇が必要だが具体策なし | 非現実的目標 |
| 2025/4/12 | 科学技術 | 科学技術: 宇宙 | H3ロケットの打ち上げ成功、商業衛星受注を獲得 | 85 | 85 | A | ✓ | 完全一致: 宇宙開発重視は一貫 | 日本の基幹ロケットへの信頼を回復し、宇宙ビジネスへの本格参入を果たす | 海外の競合（SpaceX等）との価格競争は依然として厳しい | 宇宙開発成功 |
| 2025/4/10 | 政治力 | 政権運営: 支持率 | 内閣支持率25%割れで党内から退陣論 | 25 | 20 | - | ✓ | 政治的結果: 深刻な支持率低迷 | 危機感を共有し、党内結束を促す一部の動き | 政権の求心力が著しく低下し、レームダック化が進行 | 政権危機深刻化 |
| 2025/4/7 | 外交 | 外交: 二国間(米国) | 対米関税交渉の再考を要請 | 60 | 45 | C | ✓ | 部分的矛盾: 対等外交を標榜しながら成果なし | 交渉姿勢を示し、日本の立場を主張 | 具体的な成果は皆無で、外交力の限界を露呈 | 対米交渉困難 |
| 2025/4/5 | 経済 | 財政: 財政再建 | 財政健全化目標（PB黒字化）の先送りを表明 | 40 | 25 | C | ✓ | 部分的矛盾: 財政責任重視を標榜しながら先送り | 足元の経済状況を鑑みた現実的な判断との説明 | 財政規律への信頼が大きく損なわれ、将来世代への負担転嫁 | 財政規律放棄 |
| 2025/4/3 | 科学技術 | 科学技術: AI | AI倫理ガイドラインを改訂 | 69 | 70 | A | ✓ | 完全一致: AI倫理重視は一貫した姿勢 | AIのバイアスや著作権問題への対策を明確化し、国際標準との整合性を図る | 企業の開発活動への負担増につながる可能性 | AI倫理強化 |
| 2025/3/31 | 政治力 | 政権運営: 国会 | 予算案で両院協議会の末、修正容認 | 65 | 50 | C | ✓ | 部分的矛盾: 強いリーダーシップとの矛盾 | 野党との合意形成を優先する柔軟な姿勢を示す | 首相の権威低下と見なされ、少数与党の制約を露呈 | 少数与党の限界 |
| 2025/3/31 | 経済 | 財政: 予算 | 25年度本予算115.2兆円が成立 | 45 | 40 | C | ✓ | 部分的矛盾: 財政規律との矛盾 | 政策の継続性を確保し、必要な予算を措置 | 財政赤字がさらに拡大し、将来世代への負担増 | 予算規模拡大 |
| 2025/3/30 | 安全保障 | 安全保障: 協力 | 日米台による台湾救援合同演習に参加 | 68 | 70 | A | ✓ | 完全一致: 台湾海峡安定重視は一貫 | 人道支援の名目で連携し、台湾有事への抑止力と実効性を高める | 中国・韓国が「内政干渉」と強く反発し、外交的摩擦を生む | 台湾問題対応 |
| 2025/3/25 | 経済 | 財政: 税制 | インボイス制度の見直しを表明 | 58 | 55 | B | ✓ | 概ね一致: 中小企業支援への配慮 | 小規模事業者の負担軽減に配慮し、柔軟な姿勢を示す | 制度の公平性が損なわれるとの批判や、現場の混乱を招く | 制度見直し |
| 2025/3/24 | 科学技術 | デジタル: サービス | マイナンバーカードへの運転免許証機能追加を開始 | - | 75 | A | ✓ | 完全一致: デジタル化推進の一環 | 運転免許証とマイナンバーカードの統合により、利便性が大幅に向上 | システムトラブルや高齢者への対応が課題 | 新規追加項目 |
| 2025/3/22 | 地方創生 | 地方創生 | デジタル田園都市国家構想交付金の効果測定結果を公表 | 50 | 55 | B | ✓ | 概ね一致: EBPM重視の姿勢 | EBPM（証拠に基づく政策立案）を推進する姿勢を示す | 多くの事業で明確な効果が確認できず、「バラマキ」批判が再燃 | 効果測定実施 |
| 2025/3/20 | 外交 | 外交: 多国間 | 日中韓外相会談を東京で開催 | 60 | 58 | B | ✓ | 概ね一致: 近隣外交重視の姿勢 | 近隣外交の改善を図り、地域の安定に向けた対話継続 | 具体的な成果は乏しく、形式的な会談に終わる | 多国間外交継続 |
| 2025/3/14 | 環境 | 環境 | 地熱発電の重点支援を決定 | 62 | 65 | B | ✓ | 概ね一致: 再エネ推進（原発とは別軸） | 再生可能エネルギーの多様化と地方の新たな産業創出に貢献 | 開発コストや送電網の増強が課題 | 再エネ多様化 |
| 2025/3/13 | 政治力 | 政権運営: スキャンダル | 新人議員への10万円商品券配布問題 | 20 | 5 | D | ✗ | 完全矛盾: 「正直・公正」の信条と正反対 | 政治改革への取り組み姿勢を示そうとした意図 | 「正直・公正」の看板に致命傷。政治資金問題焦点の時期に不適切な金銭配布 | 信頼失墜事件 |
| 2025/3/10 | 社会保障 | 医療・介護 | 介護・福祉人材の処遇改善（月額6000円） | 68 | 68 | A | ✓ | 完全一致: 社会保障重視は一貫 | 人材の離職を抑制し、社会を支えるケアの質を維持・向上 | 財源が不透明で、持続可能性に疑問 | 処遇改善継続 |
| 2025/3/10 | 環境 | 環境 | 東京GXサミット開催 | 68 | 65 | B | ✓ | 概ね一致: 国際的環境リーダーシップ | 脱炭素投資に関する国際協調を主導し、日本の存在感を示す | 具体的な案件や成果は少なく、形式的な側面が強い | 環境外交継続 |
| 2025/3/8 | 外交 | 外交: 二国間(インド) | 日印首脳会談で「自由で開かれたインド太平洋」推進を確認 | 70 | 70 | A | ✓ | 完全一致: インド太平洋戦略は一貫 | 対中牽制を念頭に、アジアの主要民主主義国との連携を強化 | 共同声明の内容は既存の枠組みの再確認に留まった | 印太戦略継続 |
| 2025/3/7 | 科学技術 | デジタル: 制度 | マイナンバー法改正法を閣議決定 | - | 70 | A | ✓ | 完全一致: デジタル化推進は一貫 | 約80の国家資格をマイナンバー利用事務に追加。行政手続きの効率化と利便性向上を実現 | システム整備の遅れや国民への周知不足が課題 | 新規追加項目 |
| 2025/3/5 | 政治力 | 政権運営: 選挙 | 統一地方選で苦戦 | 45 | 35 | C | ✓ | 部分的矛盾: 地方重視を標榜しながら苦戦 | 一部地域では独自の候補が勝利し、地方の多様性を示す | 都市部で議席を減らし、政権の支持率低下が地方にも波及 | 選挙苦戦継続 |
| 2025/3/3 | 経済 | 労働・賃金 | 春闘で平均賃上げ率が30年ぶりの高水準に | 80 | 75 | B | ✓ | 概ね一致: 賃上げ重視の姿勢 | 官製春闘が奏功し、持続的な賃上げへの期待が高まった | 恩恵は大手企業中心で、中小企業との格差が拡大 | 賃上げ成果 |
| 2025/2/28 | 科学技術 | デジタル: サイバー | サイバー庁創設法案を提出 | 57 | 60 | A | ✓ | 完全一致: サイバー防衛重視は一貫 | サイバー防衛を一元化し、国家の安全保障を強化 | 高度な専門人材の確保が大きな課題 | サイバー防衛強化 |
| 2025/2/25 | 外交 | 外交: 二国間(韓国) | 元徴用工問題で韓国側に解決策を提示 | 50 | 45 | C | ✓ | 部分的矛盾: 関係改善意欲と現実のギャップ | 関係改善に向けて、日本側から具体的な提案を行い、対話の主導権を握る努力 | 韓国国内の世論の反発が強く、提案が受け入れられなかった | 日韓関係困難 |
| 2025/2/25 | その他 | 防災・復興 | 防災の専門組織「災害管理庁」構想を表明 | 75 | 75 | A | ✓ | 完全一致: 防災重視は一貫した立場 | 大規模災害への対応力を高めるため、危機管理体制の抜本的強化を目指す | 構想段階であり、実現性や具体的な権限は未定 | 防災体制強化 |
| 2025/2/22 | 政治力 | 政権運営: スキャンダル | 閣僚の過去の不適切発言が発覚し更迭 | 40 | 35 | C | ✓ | 部分的矛盾: 人事の身体検査の甘さ | 問題発覚後、迅速に更迭し、政権へのダメージを最小限に抑制 | 任命責任が問われ、内閣の身体検査の甘さを露呈 | 人事管理問題 |
| 2025/2/20 | その他 | 防災・復興 | 岩手県の林野火災に対応 | 70 | 65 | A | ✓ | 完全一致: 災害対応重視は一貫 | 自衛隊などを迅速に派遣し、政府として適切な対応を指示 | 火災の拡大を防げず、初動対応に課題が残った | 災害対応継続 |
| 2025/2/20 | 農政 | 食料安保 | 食料安全保障強化法案を国会提出 | 78 | 78 | A | ✓ | 完全一致: 食料安保重視は一貫 | 不測時の食料供給確保に向け、生産者への支援や備蓄体制を法的に整備 | 価格転嫁につながり、消費者負担が増えるとの懸念 | 食料安保強化 |
| 2025/2/18 | 経済 | 労働・賃金 | フリーランス保護新法を施行 | 75 | 75 | A | ✓ | 完全一致: 労働者保護重視は一貫 | 曖昧な立場に置かれがちだったフリーランスの権利保護を強化 | 実効性を担保するための監督体制が不十分 | 労働者保護強化 |
| 2025/2/15 | 安全保障 | 安全保障: 行動 | 尖閣諸島沖の中国観測ブイを撤去 | 75 | 75 | A | ✓ | 完全一致: 領土主権防衛は一貫した立場 | 日本の主権を毅然と主張し、実効支配を強化 | 中国側の強い反発を招き、地域の緊張を高めた側面も | 領土防衛強化 |
| 2025/2/12 | 科学技術 | デジタル: サイバー | 重要インフラ事業者へのサイバー演習を義務化 | 80 | 80 | A | ✓ | 完全一致: サイバー防衛重視は一貫 | 電力や金融など社会基盤の防御力を高め、国家安全保障に貢献 | 中小の事業者にとっては大きな負担となる | サイバー防衛強化 |
| 2025/2/10 | 政治力 | 政権運営: 党内 | 党大会で「国民政党」への回帰を宣言 | 65 | 55 | B | ✓ | 概ね一致: 幅広い支持層獲得への意欲 | 幅広い層からの支持獲得を目指す姿勢をアピール | 具体的な党改革案が乏しく、スローガン倒れとの冷めた見方も | 党運営方針 |
| 2025/2/7 | 外交 | 外交: 二国間(米国) | 日米首脳会談で尖閣防衛を再確認 | 75 | 75 | A | ✓ | 完全一致: 日米同盟重視は一貫 | 日米安保条約第5条の適用を再確認し、同盟の結束と抑止力を誇示 | 懸案の関税問題など、具体的な経済的成果は乏しい | 日米同盟強化 |
| 2025/2/7 | 経済 | 経済: 成長戦略 | 対米インフラへ1兆円の投資を表明 | 55 | 45 | C | ✓ | 部分的矛盾: 対等な同盟関係との矛盾 | 日米同盟の強化に貢献し、経済関係の深化を図る | 見返りのない「一方的譲歩」との強い批判を招く | 対米投資問題 |
| 2025/2/1 | 経済 | 財政: 予算 | 物価対策補正（7.2兆円）成立 | 70 | 60 | C | ✓ | 部分的矛盾: 財政規律との矛盾 | 生活支援を迅速に実施し、国民の負担軽減を図る | 財政悪化の一途を辿り、将来世代への負担転嫁 | 財政拡張継続 |
| 2025/2/1 | 経済 | 経済: 成長戦略 | AI産業アライアンス構想 | 65 | 65 | A | ✓ | 完全一致: AI戦略重視は一貫 | 日米欧企業との連携で国際市場拡大を目指す | データの越境移転などの課題が残存 | AI戦略継続 |
| 2025/1/24 | 経済 | 成長戦略 | 施政方針演説で投資立国実現を表明 | - | 75 | A | ✓ | 完全一致: 投資重視の経済政策 | コストカット型から高付加価値創出型経済への転換を明確化。官民投資フォーラム開催を表明 | 具体的な投資促進策や目標達成手段が不明確 | 新規追加項目 |
| 2025/1/24 | 地方創生 | 政権運営: 広報 | 施政方針演説で地方創生を最重点に | 80 | 80 | A | ✓ | 完全一致: ライフワークとしての地方創生 | 政権のビジョンを鮮明化し、地方創生への強いコミットメントを示す | 具体策に乏しく、従来政策の焼き直し的側面も | 地方創生重点化 |
| 2025/1/22 | 環境 | 環境 | COP30に向け、途上国への気候変動対策支援を倍増表明 | 70 | 65 | B | ✓ | 概ね一致: 国際環境協力重視 | 国際社会における日本のリーダーシップをアピール | 国内の脱炭素が遅れる中での「外面の良い」政策との批判も | 環境外交継続 |
| 2025/1/20 | 外交 | 外交: 対中政策 | 中国人の観光ビザ要件を大幅緩和 | 30 | 20 | D | ✓ | 完全矛盾: 安全保障重視との矛盾 | インバウンド需要を喚起し、観光収入増が期待される | 経済を優先し安全保障上のリスクを増大させたと強い批判 | 安保軽視政策 |
| 2025/1/17 | 経済 | 経済: 金融・為替 | 1ドル160円突破を受け、緊急経済閣僚会議を招集 | 45 | 40 | B | ✓ | 概ね一致: 為替安定化への関心 | 市場に対して円安を容認しないという強いメッセージを送った | 具体的な対策は乏しく、口先介入との批判を浴びた | 為替対応限界 |
| 2025/1/15 | その他 | 人権 | 同性パートナーの権利に関する24法改正 | 65 | 60 | B | ✓ | 概ね一致: 人権重視の姿勢 | 人権擁護の観点から前進し、多様性への配慮を示す | 同性婚の法制化には至らず、不完全な対応との批判 | 人権政策前進 |
| 2025/1/12 | 社会保障 | 医療・介護 | マイナ保険証の併用期間を延長 | 60 | 58 | B | ✓ | 概ね一致: 柔軟な制度運用 | 国民の不安に配慮した柔軟な対応を示す | デジタル化が後退したとの批判も存在 | 制度調整継続 |
| 2025/1/10 | 安全保障 | 防衛: 体制 | 自衛隊と海上保安庁の連携訓練を強化 | 78 | 78 | A | ✓ | 完全一致: グレーゾーン事態対処重視 | グレーゾーン事態への対処能力を向上させ、シームレスな対応を目指す | 指揮系統の違いから現場レベルでの連携に課題が残る | 連携強化継続 |
| 2025/1/5 | 社会保障 | 医療・介護 | 高齢者医療費の2割負担拡大を閣議決定 | 53 | 55 | B | ✓ | 概ね一致: 社会保障制度持続性重視 | 現役世代の負担を軽減し、社会保障財政の安定化に寄与 | 対象となる高齢者層（年収180万円〜）から強い反発を招いた | 社保制度調整 |
| 2024/12/28 | 政治力 | 政権運営: 党内 | 党派閥の再編を主導 | 62 | 60 | B | ✓ | 概ね一致: 党改革への取り組み | 旧派閥を解消し政策グループへ移行させる改革を主導 | 首相への権限集中と党内摩擦を生む結果も | 党改革継続 |
| 2024/12/27 | 経済 | 財政: 税制 | 2025年度税制改正大綱を決定 | - | 65 | B | ✓ | 概ね一致: 税制改革への取り組み | 基礎控除・給与所得控除を各10万円引き上げ、103万円の壁を123万円に拡大。防衛特別法人税を創設 | 防衛増税の具体的開始時期は先送り。根本的な税制改革には至らず | 新規追加項目 |
| 2024/12/27 | 安全保障 | 防衛: 予算・装備 | 防衛費8.7兆円（過去最大）を計上 | 85 | 85 | A | ✓ | 完全一致: 2007年防衛相以来の一貫した立場 | 長射程ミサイル開発等、防衛力を抜本的に強化し日本の抑止力を向上 | 財源の議論が不十分なまま、財政を圧迫する懸念 | 防衛力強化継続 |
| 2024/12/27 | 安全保障 | 防衛: 予算・装備 | 長射程ミサイル開発に939億円 | 80 | 80 | A | ✓ | 完全一致: 反撃能力保有論は一貫 | 反撃能力の保有に向けた具体的な一歩を踏み出す | 憲法上の論議を呼び、平和主義との整合性に疑問も | 反撃能力保有 |
| 2024/12/27 | 安全保障 | 防衛: 体制 | 統合防空ミサイル防衛システムの開発 | 75 | 75 | A | ✓ | 完全一致: ミサイル防衛重視は一貫 | ミサイル防衛網を強化し、多層防衛を実現 | システムの完成は遅れる見込みで即効性に欠ける | 防衛システム開発 |
| 2024/12/26 | 環境 | エネルギー | 原発「最大活用」へ方針転換 | 58 | 20 | D | ✗ | 完全矛盾: 2017年「稼働原発数をゼロに近づける」発言と正反対 | エネルギー安全保障上の現実的判断との主張 | 過去の一貫した脱原発的立場を説明なく180度転換。国民への説明責任を全く果たしていない | 重大政策転換 |
| 2024/12/25 | 環境 | エネルギー | 第7次エネルギー基本計画で2040年目標を明示 | 60 | 30 | D | ✓ | 完全矛盾: 脱原発から推進への転換 | エネルギー政策の方向性を明確化し、長期的ビジョンを提示 | 原発推進への転換で過去の発言との整合性に重大な疑問 | エネ政策転換 |
| 2024/12/20 | 政治力 | 政権運営: 党内 | 安倍派裏金議員の処分を決定 | 70 | 65 | B | ✓ | 概ね一致: 党刷新への取り組み | 15名の役職停止・離党勧告など、党刷新の姿勢を示す | 処分内容を巡り、党内から反発の声も上がる | 党刷新継続 |
| 2024/12/20 | 経済 | 経済: 成長戦略 | GX投資150兆円ロードマップを決定 | 70 | 65 | B | ✓ | 概ね一致: 成長と脱炭素の両立 | 成長と脱炭素の両立を目指す長期的な官民投資計画を策定 | 将来的な国民負担の増大が懸念される | GX戦略継続 |
| 2024/12/17 | 安全保障 | 安全保障: 協力 | 日比RAA（円滑化協定）を批准 | 80 | 80 | A | ✓ | 完全一致: 多層的安保協力の実現 | フィリピンとの防衛協力を法的に強化し、対中抑止力を向上 | 実効性は今後の共同訓練等の運用次第で未知数 | 安保協力強化 |
| 2024/12/15 | 社会保障 | 少子化対策 | こども家庭庁の権限強化を表明 | 70 | 70 | A | ✓ | 完全一致: 少子化対策重視は一貫 | 縦割り行政の弊害をなくし、一元的な子ども政策の推進を目指す | 他の省庁との調整が難航し、実効性に課題 | 少子化対策強化 |
| 2024/12/12 | 経済 | 労働・賃金 | 最低賃金目標を再修正し後退 | 50 | 25 | D | ✓ | 完全矛盾: 目標後退で一貫性を失う | 雇用流動性の議論を開始するきっかけになった | 達成時期の明記を避け、看板政策から後退し国民の信頼を失う | 公約後退問題 |
| 2024/12/10 | 経済 | 経済: 金融・為替 | 日銀との共同声明でデフレ脱却を目指す | 65 | 60 | B | ✓ | 概ね一致: 経済政策の連続性 | 政府・日銀が一体となって物価目標達成に取り組む姿勢を明確化 | 金融政策の正常化が遅れるとの懸念も存在 | 金融政策継続 |
| 2024/12/8 | 外交 | 外交: 二国間(欧州) | フィンランド大統領と会談、NATO連携深化 | 65 | 65 | A | ✓ | 完全一致: 価値観外交重視は一貫 | ロシアを念頭に多極的な安全保障協力を強化 | 理念の共有に留まり、具体的な協力文書等には乏しい | 価値観外交継続 |
| 2024/12/5 | 科学技術 | デジタル: DX | デジタル行財政改革会議で政府データAPI公開方針 | 64 | 65 | B | ✓ | 概ね一致: デジタル政府推進 | 行政の透明性・効率性を向上させるデジタル化を推進 | 個人情報保護との両立が大きな課題 | デジタル政府継続 |
| 2024/12/2 | 社会保障 | 医療: 制度 | マイナ保険証への完全移行を実施 | - | 60 | B | ✓ | 概ね一致: デジタル化推進だが国民負担も | 医療DXの推進により診療情報の共有や高額療養費の自動適用を実現 | 紙の保険証廃止に対する国民の不安や混乱が継続。資格確認書の周知不足 | 新規追加項目 |
| 2024/12/1 | 政治力 | 政権運営: 広報 | 国民対話フォーラムを全国で開始 | 69 | 65 | A | ✓ | 完全一致: 国民との対話重視は一貫 | 国民の声を直接聞く「参加型民主主義」を実践 | 政策への具体的な反映は限定的との指摘も | 対話重視継続 |
| 2024/11/30 | 地方創生 | 地方創生 | 地方創生2.0ロードマップを提示 | 68 | 75 | A | ✓ | 完全一致: 地方創生への継続的取り組み | 首長との協働や成果指標(KPI)を導入し、より実効性のある政策を目指す | 財源やKPIの具体性が乏しく、実現可能性に疑問 | 地方創生継続 |
| 2024/11/29 | 経済 | 財政: 予算 | 13.9兆円の物価高対策補正予算が成立 | 60 | 50 | C | ✓ | 部分的矛盾: 財政規律との矛盾 | 国民生活の支援策を迅速に実行し、物価高への対処を図る | 財政規律の緩みや国債増発につながり、「バラマキ」との批判 | 財政拡張継続 |
| 2024/11/28 | 外交 | 外交: 二国間(ロシア) | ロシア外相と電話会談、対話継続で一致 | 50 | 48 | B | ✓ | 概ね一致: 対話路線継続 | ウクライナ情勢が緊迫する中、対話の窓口を維持 | 北方領土問題に進展はなく、形式的な会談に終わる | 対露関係継続 |
| 2024/11/25 | 科学技術 | 科学技術: 宇宙 | 宇宙開発戦略を再始動 | 68 | 70 | A | ✓ | 完全一致: 宇宙開発重視は一貫 | 月面探査への民間補助を拡充し、新たな成長市場の創出を期待 | 日本の宇宙産業の基盤は依然として脆弱 | 宇宙開発継続 |
| 2024/11/22 | 経済 | 労働・賃金 | 「年収の壁」対策の恒久化を検討 | 62 | 62 | B | ✓ | 概ね一致: 労働参加促進への取り組み | パート労働者の就業調整を解消し、人手不足緩和を目指す | 制度設計が複雑で、実効性に疑問の声も上がる | 労働制度調整 |
| 2024/11/20 | 政治力 | 政権運営: 国会 | 野党連携で修正可決20件 | 50 | 40 | C | ✓ | 部分的矛盾: リーダーシップとの矛盾 | 少数与党での与野党の合意形成を優先 | 法案が骨抜きにされ、政策の実効性が大幅に低下 | 少数与党制約 |
| 2024/11/18 | 経済 | 経済: 成長戦略 | 半導体支援（CHIPS法）第2弾を決定 | 68 | 70 | A | ✓ | 完全一致: 経済安保重視は一貫 | TSMC等へ追加2兆円を投じ、経済安保の中核である国内半導体産業を強化 | 経済効果が一部に限定されるとの懸念も存在 | 半導体戦略継続 |
| 2024/11/15 | 政治力 | 政治改革: 資金規正 | 文通費データベースを公開 | 78 | 75 | A | ✓ | 完全一致: 政治の透明性向上は一貫 | 市民のアクセスを向上させ透明性を確保する改革を実現 | 運用コストや実効性の課題が残存 | 透明性向上継続 |
| 2024/11/14 | 外交 | 外交: 多国間 | ASEAN首脳会議で連結性支援を表明 | 65 | 60 | B | ✓ | 概ね一致: ASEAN重視の姿勢 | 地域の関与をアピールし、多国間外交への積極参加を示す | 支援額が2.3億ドルと小規模で、実質的なインパクトは限定的 | ASEAN外交継続 |
| 2024/11/12 | 教育 | 教育: 大学改革 | 大学ファンドの運用見直しを指示 | 65 | 65 | B | ✓ | 概ね一致: 大学改革への取り組み | よりリスクを取った運用で高いリターンを目指し、若手研究者への支援を強化 | 市場の変動によっては元本割れのリスクも増大 | 大学改革継続 |
| 2024/11/11 | 政治力 | 政権運営: 国会 | 首相指名選挙で決選投票に | 70 | 50 | C | ✓ | 部分的矛盾: 安定政権との矛盾 | 少数与党ながらも、野党の分断もあり政権を継続 | 国会の正統性に疑問を呈する声が上がり、不安定な政権基盤を露呈 | 政権基盤脆弱 |
| 2024/11/8 | 外交 | 外交: 二国間(米国) | 米国務長官と会談、同盟強化を確認 | 70 | 70 | A | ✓ | 完全一致: 日米同盟重視は一貫 | 政権交代後も揺るぎない日米同盟の重要性を共有 | 貿易摩擦など具体的な懸案事項での進展はなし | 日米関係継続 |
| 2024/11/5 | その他 | 防災・復興 | 能登半島地震復興本部で陣頭指揮 | 75 | 70 | A | ✓ | 完全一致: 災害対応重視は一貫 | 首相自ら指揮を執り、復旧・復興への迅速な対応を示す | 一部野党からは初動の遅れを批判された | 災害対応継続 |
| 2024/11/3 | その他 | 防災・復興 | 国土強靱化で老朽橋梁の補修を前倒し | 64 | 65 | A | ✓ | 完全一致: インフラ強化重視は一貫 | インフラの安全性を向上させる予防的対策を実施 | 財源が不足しており、計画的な実施に課題 | インフラ強化継続 |
| 2024/11/2 | 政治力 | 政治改革: 資金規正 | 第三者監視機関の設置を検討 | 76 | 65 | B | ✓ | 概ね一致: 政治改革への取り組み | 外部チェック機能導入に向けた協議を開始 | 法的な権限が未定のままで、実効性に疑問 | 政治改革検討 |
| 2024/10/27 | 政治力 | 政権運営: 選挙 | 衆院選で与党過半数割れ | 30 | 25 | - | ✓ | 政治的結果: 解散タイミングの判断ミス | 就任直後に国民に信を問う民主的正統性確保の姿勢 | 与党過半数割れで政権基盤が著しく脆弱化。政策実現能力が大幅に制約される構造的問題 | 政権基盤崩壊 |
| 2024/10/23 | 政治力 | 政治改革: 資金規正 | 政治資金規正法改正案を提出 | 85 | 75 | B | ✓ | 概ね一致: 政治改革への強い意欲 | 政策活動費廃止を盛り込み、政治不信の解消を目指す姿勢を明確化 | 法案に「抜け穴」があるとの批判も根強く残存 | 政治改革継続 |
| 2024/10/20 | 社会保障 | 医療・介護 | オンライン診療の恒久化を決定 | 72 | 70 | B | ✓ | 概ね一致: 医療制度改革への取り組み | 医療へのアクセスを向上させ、患者の利便性を高める | 情報格差（デジタルデバイド）を持つ高齢者への配慮が不足 | 医療DX推進 |
| 2024/10/18 | 地方創生 | 地方創生: DX | デジタル田園都市構想を拡充 | 66 | 70 | A | ✓ | 完全一致: 地方DX推進は一貫 | 地方のDXを促進し、交付金を倍増して具体的支援を強化 | 効果測定が不十分で、実際の成果が見えにくい | 地方DX継続 |
| 2024/10/15 | 政治力 | 政治改革: 資金規正 | 政策活動費の廃止「検討」表明 | 80 | 40 | C | △ | 部分的矛盾: 「廃止方針決定」ではなく「検討表明」に留まる | 領収書の全面公開を義務付け、政治資金の透明化への歴史的な一歩 | 実際の法的廃止は未実現。与党内の保守派から強い反発を受け、実効性に疑問 | 表現修正必要 |
| 2024/10/15 | 経済 | 財政: 税制 | 防衛増税の具体化時期を年末までに決定と表明 | - | 55 | B | ✓ | 概ね一致: 防衛費増強への財源確保 | 防衛力強化に必要な財源確保の道筋を明確化する姿勢 | 国民負担増への具体的説明が不十分。政治的に困難な課題を先送り | 新規追加項目 |
| 2024/10/15 | 経済 | 経済: 成長戦略 | 規制改革推進会議を再強化 | 68 | 65 | B | ✓ | 概ね一致: 規制改革重視は一貫 | スタートアップ向け規制緩和特区を決定し、成長促進を図る | 既得権益層からの抵抗が強く、実効性のある改革に課題 | 規制改革継続 |
| 2024/10/12 | 科学技術 | 科学技術: AI | AI戦略会議を発足 | 70 | 70 | A | ✓ | 完全一致: AI戦略重視は一貫 | 官民連携でAI・半導体開発を統括する司令塔を新設し、技術立国を目指す | 省庁間の調整遅延が実効性を損なう懸念が存在 | AI戦略継続 |
| 2024/10/11 | 政治力 | 政権運営: 選挙 | 衆院解散・総選挙へ | 45 | 30 | C | ✓ | 部分的矛盾: 安定政権運営との矛盾 | 就任直後に国民に信を問い、民主的正統性を得ようとする姿勢 | 与党過半数割れという結果を招き、政権基盤が著しく脆弱化 | 解散判断ミス |
| 2024/10/11 | 安全保障 | 安全保障: 協力 | 日米地位協定の改定意欲を示す | 55 | 45 | B | ✓ | 概ね一致: 基地負担軽減への関心 | 基地負担軽減に向けた一歩として改定意欲を示す | 米国との交渉は極めて困難で、具体的な進展は期待薄 | 意欲表明に留まる |
`;
        
        // --- State Management ---
        let allPolicies = [];
        let filteredPolicies = [];
        let currentSort = { key: 'date', direction: 'desc' };
        
        // --- Utility Functions ---
        /**
         * Parses the raw policy data text into an array of policy objects.
         * @param {string} dataText - The raw pipe-separated text data.
         * @returns {Array<Object>} An array of policy objects.
         */
        function parsePolicyData(dataText) {
            const parse = (text) => {
                const rows = text.trim().split('\n').filter(line => line.startsWith('|'));
                return rows.map(row => {
                    const columns = row.split('|').slice(1, -1).map(c => c.trim().replace(/\*\*/g, ''));
                    if (columns.length < 12) return null;

                    // Handle date ranges (e.g., "2025/6/16-17") by taking the start date.
                    const dateStr = columns[0].split('-')[0].trim();

                    let mainField = columns[1];
                    if (mainField === '社会') {
                        mainField = 'その他';
                    }

                    let policy = {
                        date: dateStr,
                        mainField: mainField,
                        subField: columns[2],
                        policy: columns[3],
                        originalScore: isNaN(parseInt(columns[4])) ? '-' : parseInt(columns[4], 10),
                        score: parseInt(columns[5], 10),
                        consistency: columns[6],
                        factCheck: columns[7],
                        pastRemarks: columns[8],
                        positiveEval: columns[9],
                        negativeEval: columns[10],
                        notes: columns[11]
                    };
                    
                    // Specific data corrections
                    if (policy.policy.includes("記録的な米不足への対応の遅れ")) policy.date = "2025/4/9";
                    if (policy.policy.includes("サウジアラビアを訪問")) policy.notes = "中東外交継続（岩屋外務大臣が交渉）";
                    
                    return policy;

                }).filter(p => p && !isNaN(p.score));
            }

            const policies = parse(dataText);
            // Deduplicate policies based on the policy name
            const uniquePolicies = Array.from(new Map(policies.map(p => [p.policy, p])).values());
            
            return uniquePolicies;
        }


        /**
         * Renders the policy cards to the container.
         * @param {Array<Object>} data - The array of policies to render.
         */
        function renderCards(data) {
            const container = document.getElementById('policy-cards-container');
            container.innerHTML = '';
            if (data.length === 0) {
                container.innerHTML = `<p class="text-slate-500 col-span-full text-center">該当する政策項目はありません。</p>`;
                return;
            }

            data.forEach(p => {
                const card = document.createElement('div');
                card.className = 'policy-card p-4 border border-slate-200';

                const scoreClass = p.score >= 75 ? 'text-emerald-600' : p.score < 40 ? 'text-red-600' : 'text-slate-800';
                const consistencyColors = { 'A': 'bg-emerald-100 text-emerald-800', 'B': 'bg-sky-100 text-sky-800', 'C': 'bg-amber-100 text-amber-800', 'D': 'bg-red-100 text-red-800', '-': 'bg-slate-100 text-slate-800' };
                
                // Conditionally render notes section only if there are notes
                const notesHTML = p.notes ? `
                    <div class="text-sm mt-3">
                         <p><strong class="text-gray-700">備考:</strong> ${p.notes}</p>
                    </div>
                ` : '';

                card.innerHTML = `
                    <div class="flex-grow flex flex-col">
                        <div class="flex-grow">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-lg font-bold text-slate-800 pr-2">${p.policy}</h3>
                                <div class="text-right flex-shrink-0">
                                    <p class="text-xs text-slate-500">評価点</p>
                                    <p class="text-2xl font-bold ${scoreClass}">${p.score}</p>
                                    <p class="text-xs text-slate-500 mt-1">前提評価: ${p.originalScore}</p>
                                </div>
                            </div>

                            <div class="mb-3">
                                <span class="inline-block bg-slate-200 rounded-full px-3 py-1 text-sm font-semibold text-slate-700 mr-2">${p.mainField}</span>
                                <span class="inline-block bg-slate-100 rounded-full px-3 py-1 text-sm text-slate-600">${p.subField}</span>
                            </div>
                            
                            <div class="text-sm text-slate-600 mb-3 space-y-2">
                                <p><strong>日付:</strong> ${p.date}</p>
                                <div>
                                    <p>
                                        <strong class="mr-2">過去の言動との整合性:</strong>
                                        <span class="px-2 py-0.5 text-sm font-bold rounded-md ${consistencyColors[p.consistency] || 'bg-slate-100'}">${p.consistency}</span>
                                    </p>
                                    <p class="mt-1 text-slate-700">${p.pastRemarks}</p>
                                </div>
                            </div>

                            <div class="text-sm space-y-2 p-3 bg-slate-50 rounded-md">
                                <p><strong class="text-green-700">ポジティブ評価:</strong> ${p.positiveEval}</p>
                                <p><strong class="text-red-700">ネガティブ評価:</strong> ${p.negativeEval}</p>
                            </div>
                        </div>
                        ${notesHTML}
                    </div>
                `;
                container.appendChild(card);
            });
        }

        /**
         * Filters and sorts policies based on user input and updates the display.
         */
        function updateDisplay() {
            const mainFieldFilter = document.getElementById('mainFieldFilter').value;
            const subFieldFilter = document.getElementById('subFieldFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let data = allPolicies.filter(p => {
                const mainMatch = mainFieldFilter ? p.mainField === mainFieldFilter : true;
                const subMatch = subFieldFilter ? p.subField === subFieldFilter : true;
                const searchMatch = searchTerm ? JSON.stringify(p).toLowerCase().includes(searchTerm) : true;
                return mainMatch && subMatch && searchMatch;
            });
            
            const { key, direction } = currentSort;
            data.sort((a, b) => {
                let valA = a[key];
                let valB = b[key];
                let comparison = 0;

                switch (key) {
                    case 'date':
                        // Create Date objects for correct chronological sorting.
                        const dateA = new Date(valA);
                        const dateB = new Date(valB);
                        if (dateA > dateB) comparison = 1;
                        else if (dateA < dateB) comparison = -1;
                        break;
                    case 'consistency':
                        const consistencyOrder = { 'A': 4, 'B': 3, 'C': 2, 'D': 1, '-': 0 };
                        const orderA = consistencyOrder[valA] || 0;
                        const orderB = consistencyOrder[valB] || 0;
                        if (orderA > orderB) comparison = 1;
                        else if (orderA < orderB) comparison = -1;
                        break;
                    case 'policy':
                        // Use localeCompare for correct Japanese string sorting
                        comparison = valA.localeCompare(valB, 'ja');
                        break;
                    default: // Handles 'score' and any other numeric keys
                        if (valA > valB) comparison = 1;
                        else if (valA < valB) comparison = -1;
                        break;
                }
                
                return direction === 'asc' ? comparison : -comparison;
            });

            filteredPolicies = data;
            renderCards(data);
            updateFilterSummary(data);
            updateSortIndicators();
        }
        
        /**
         * Updates the sub-field filter options based on the selected main field.
         */
        function updateSubFieldFilter() {
            const mainFieldFilter = document.getElementById('mainFieldFilter');
            const subFieldFilter = document.getElementById('subFieldFilter');
            const selectedMainField = mainFieldFilter.value;
            const currentSubFieldValue = subFieldFilter.value;
            subFieldFilter.innerHTML = '<option value="">全てのサブ分野</option>';
            let subFields;
            if (selectedMainField) {
                subFields = [...new Set(allPolicies.filter(p => p.mainField === selectedMainField).map(p => p.subField))].sort((a, b) => a.localeCompare(b, 'ja'));
            } else {
                subFields = [...new Set(allPolicies.map(p => p.subField))].sort((a, b) => a.localeCompare(b, 'ja'));
            }
            subFields.forEach(field => subFieldFilter.add(new Option(field, field)));
            if (subFields.includes(currentSubFieldValue)) {
                subFieldFilter.value = currentSubFieldValue;
            }
        }


        /**
         * Sets up the filter controls and their event listeners.
         */
        function setupFilters() {
            const mainFieldFilter = document.getElementById('mainFieldFilter');
            const subFieldFilter = document.getElementById('subFieldFilter');
            const searchInput = document.getElementById('searchInput');
            
            mainFieldFilter.innerHTML = `<option value="">全てのメイン分野</option>`;
            let mainFields = [...new Set(allPolicies.map(p => p.mainField))];
            const otherFieldIndex = mainFields.indexOf('その他');
            if (otherFieldIndex > -1) {
                mainFields.splice(otherFieldIndex, 1);
            }
            mainFields.sort((a,b) => a.localeCompare(b, 'ja'));
            mainFields.push('その他');

            mainFields.forEach(field => mainFieldFilter.add(new Option(field, field)));
            updateSubFieldFilter();

            mainFieldFilter.addEventListener('change', () => {
                updateSubFieldFilter();
                subFieldFilter.value = ""; 
                updateDisplay();
            });
            subFieldFilter.addEventListener('input', updateDisplay);
            searchInput.addEventListener('input', updateDisplay);
        }

        /**
         * Sets up the sorting controls and their event listeners.
         */
        function setupSorting() {
            document.querySelectorAll('.sort-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const sortKey = button.dataset.sortKey;
                    if (currentSort.key === sortKey) {
                        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSort.key = sortKey;
                        currentSort.direction = sortKey === 'date' || sortKey === 'score' || sortKey === 'consistency' ? 'desc' : 'asc';
                    }
                    updateDisplay();
                });
            });
        }
        
        /**
         * Updates the visual indicators for the active sort button.
         */
        function updateSortIndicators() {
             document.querySelectorAll('.sort-btn').forEach(button => {
                 button.classList.remove('active', 'asc', 'desc');
                 if (button.dataset.sortKey === currentSort.key) {
                     button.classList.add('active', currentSort.direction);
                 }
              });
        }
        
        /**
         * Updates the summary text showing the number of filtered results.
         * @param {Array<Object>} data - The currently filtered data.
         */
        function updateFilterSummary(data) {
            const resultsDiv = document.getElementById('filter-results');
            if (data.length === allPolicies.length && document.getElementById('mainFieldFilter').value === '' && document.getElementById('subFieldFilter').value === '' && document.getElementById('searchInput').value === '') {
                resultsDiv.innerHTML = `<strong>${allPolicies.length}</strong> 件の政策を表示中`;
            } else {
                const totalScore = data.reduce((acc, p) => acc + p.score, 0);
                const avgScore = data.length > 0 ? (totalScore / data.length).toFixed(1) : '0';
                resultsDiv.innerHTML = `<strong>${data.length}</strong> 件の政策が該当 (平均評価点: <strong>${avgScore}</strong>)`;
            }
        }

        /**
         * Sets up the toggle functionality for the analysis section.
         */
        function setupAnalysisToggle() {
            const toggleBtn = document.getElementById('toggleAnalysisBtn');
            const analysisWrapper = document.getElementById('analysis-wrapper');
            const chartToggleBtns = document.querySelectorAll('.chart-toggle-btn');
            
            toggleBtn.addEventListener('click', () => {
                const isHidden = analysisWrapper.classList.toggle('hidden');
                toggleBtn.textContent = isHidden ? '総合評価・分析を表示' : '分析を隠す';
                // If opening, show the default chart/text if none is active
                if (!isHidden && !document.querySelector('.chart-toggle-btn.active')) {
                    switchChart('evaluation');
                }
            });
            
            chartToggleBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Automatically open analysis section if a chart button is clicked
                    if (analysisWrapper.classList.contains('hidden')) {
                        analysisWrapper.classList.remove('hidden');
                        toggleBtn.textContent = '分析を隠す';
                    }
                    switchChart(btn.dataset.chart);
                });
            });
        }

        /**
         * Switches the active view within the analysis section.
         * @param {string} chartName - The name of the chart/content to display.
         */
        function switchChart(chartName) {
            document.querySelectorAll('.analysis-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.chart-toggle-btn').forEach(btn => btn.classList.remove('active'));

            if (chartName === 'evaluation') {
                document.getElementById('evaluation-text').classList.add('active');
            } else if (chartName === 'methodology') {
                document.getElementById('methodology-text').classList.add('active');
            } else {
                document.getElementById(`${chartName}-container`).classList.add('active');
            }
            document.querySelector(`.chart-toggle-btn[data-chart="${chartName}"]`).classList.add('active');
        }

        /**
         * Sets up the Excel export functionality.
         */
        function setupExcelExport() {
            document.getElementById('exportBtn').addEventListener('click', () => {
                const headers = ["日付", "メイン分野", "サブ分野", "政策", "前提評価", "修正評価", "整合性", "過去発言との整合性", "ポジティブ評価", "ネガティブ評価", "備考"];
                const rows = filteredPolicies.map(p => [p.date, p.mainField, p.subField, p.policy, p.originalScore, p.score, p.consistency, p.pastRemarks, p.positiveEval, p.negativeEval, p.notes]);
                let csvContent = "\uFEFF"; // BOM for Excel
                csvContent += headers.map(h => `"${h}"`).join(',') + '\r\n';
                rows.forEach(rowArray => {
                    let row = rowArray.map(field => `"${String(field || '').replace(/"/g, '""')}"`).join(',');
                    csvContent += row + '\r\n';
                });
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement("a");
                if (link.download !== undefined) {
                    const url = URL.createObjectURL(blob);
                    link.setAttribute("href", url);
                    link.setAttribute("download", "seisaku_hyouka_export.csv");
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
            });
        }
        
        // --- Metrics and Charts ---

        const scoreIcons = {
            good: `<svg xmlns="http://www.w3.org/2000/svg" class="h-full w-full text-emerald-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a.5.5 0 01.707.707a5 5 0 01-7.07 0a.5.5 0 01.707-.707a4 4 0 005.656 0z" clip-rule="evenodd" /></svg>`,
            neutral: `<svg xmlns="http://www.w3.org/2000/svg" class="h-full w-full text-amber-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.5 4.5a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5z" clip-rule="evenodd" /></svg>`,
            bad: `<svg xmlns="http://www.w3.org/2000/svg" class="h-full w-full text-red-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-2.146 5.854a.5.5 0 01-.708 0L10 12.707l-1.146 1.147a.5.5 0 01-.708-.708L9.293 12 8.146 10.854a.5.5 0 11.708-.708L10 11.293l1.146-1.147a.5.5 0 01.708.708L10.707 12l1.147 1.146a.5.5 0 010 .708z" clip-rule="evenodd" /></svg>`
        };
        
        /**
         * Calculates and displays the main KPI metrics.
         */
        function calculateAndDisplayMetrics() {
            document.getElementById('policy-count').textContent = allPolicies.length;
            const totalScore = allPolicies.reduce((acc, p) => acc + p.score, 0);
            const overallAvg = allPolicies.length > 0 ? totalScore / allPolicies.length : 0;
            document.getElementById('overall-avg').textContent = overallAvg.toFixed(1);

            const iconDiv = document.getElementById('overall-avg-icon');
            if (overallAvg >= 65) {
                iconDiv.innerHTML = scoreIcons.good;
            } else if (overallAvg < 50) {
                iconDiv.innerHTML = scoreIcons.bad;
            } else {
                iconDiv.innerHTML = scoreIcons.neutral;
            }

            const fieldAverages = getFieldAverages();
            const sortedFields = Object.entries(fieldAverages).sort(([, a], [, b]) => b.avg - a.avg);
            
            if (sortedFields.length > 0) {
                document.getElementById('best-field').textContent = `${sortedFields[0][0]} (${sortedFields[0][1].avg.toFixed(1)})`;
                document.getElementById('worst-field').textContent = `${sortedFields[sortedFields.length - 1][0]} (${sortedFields[sortedFields.length - 1][1].avg.toFixed(1)})`;
            }
        }
        
        /**
         * Creates all charts for the analysis section.
         */
        function createAllCharts() {
            const fieldAverages = getFieldAverages();
            const labels = Object.keys(fieldAverages).filter(key => key !== 'その他'); 
            const data = labels.map(label => fieldAverages[label].avg);
            createRadarChart(labels, data);
            createBarChart(Object.keys(fieldAverages), Object.values(fieldAverages).map(v => v.avg));
            createLineChart();
            createScatterChart();
        }
        
        /**
         * Calculates the average score for each main field.
         * @returns {Object} An object with main fields as keys and their average scores.
         */
        function getFieldAverages() {
            const fieldScores = allPolicies.reduce((acc, p) => {
                if (!acc[p.mainField]) acc[p.mainField] = { total: 0, count: 0 };
                acc[p.mainField].total += p.score;
                acc[p.mainField].count++;
                return acc;
            }, {});
            const fieldAverages = {};
            for (const field in fieldScores) {
                fieldAverages[field] = { avg: fieldScores[field].total / fieldScores[field].count, count: fieldScores[field].count };
            }
            return fieldAverages;
        }

        function createRadarChart(labels, data) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            if (window.radarChartInstance) window.radarChartInstance.destroy();
            window.radarChartInstance = new Chart(ctx, { type: 'radar', data: { labels: labels, datasets: [{ label: '分野別平均点', data: data, fill: true, backgroundColor: 'rgba(56, 189, 248, 0.2)', borderColor: 'rgb(56, 189, 248)', pointBackgroundColor: 'rgb(56, 189, 248)', pointBorderColor: '#fff', pointHoverBackgroundColor: '#fff', pointHoverBorderColor: 'rgb(56, 189, 248)' }] }, options: { responsive: true, maintainAspectRatio: false, elements: { line: { borderWidth: 3 } }, scales: { r: { angleLines: { display: false }, suggestedMin: 0, suggestedMax: 80, pointLabels: { font: { size: 13, weight: 'bold' } } } }, plugins: { legend: { display: false } } } });
        }

        function createBarChart(initialLabels, initialData) {
            const sortedData = initialLabels.map((label, index) => ({ label, data: initialData[index] })).sort((a, b) => b.data - a.data);
            const labels = sortedData.map(d => d.label);
            const data = sortedData.map(d => d.data);
            const ctx = document.getElementById('barChart').getContext('2d');
            if (window.barChartInstance) window.barChartInstance.destroy();
            window.barChartInstance = new Chart(ctx, { type: 'bar', data: { labels: labels, datasets: [{ label: '平均評価点', data: data, backgroundColor: data.map(score => score >= 60 ? 'rgba(16, 185, 129, 0.7)' : score < 50 ? 'rgba(239, 68, 68, 0.7)' : 'rgba(251, 191, 36, 0.7)'), borderColor: data.map(score => score >= 60 ? 'rgb(16, 185, 129)' : score < 50 ? 'rgb(239, 68, 68)' : 'rgb(251, 191, 36)'), borderWidth: 1 }] }, options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { beginAtZero: true, suggestedMax: 80 } }, plugins: { legend: { display: false } } } });
        }

        function createLineChart() {
            const monthlyScores = allPolicies.reduce((acc, p) => {
                const month = p.date.substring(0, 7);
                if (!acc[month]) acc[month] = { total: 0, count: 0 };
                acc[month].total += p.score;
                acc[month].count++;
                return acc;
            }, {});
            const sortedMonths = Object.keys(monthlyScores).sort();
            const labels = sortedMonths;
            const data = sortedMonths.map(month => monthlyScores[month].total / monthlyScores[month].count);
            const ctx = document.getElementById('lineChart').getContext('2d');
            if (window.lineChartInstance) window.lineChartInstance.destroy();
            window.lineChartInstance = new Chart(ctx, { type: 'line', data: { labels: labels, datasets: [{ label: '月別平均評価点', data: data, fill: false, borderColor: 'rgb(75, 192, 192)', tension: 0.1 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { suggestedMin: 30, suggestedMax: 80 } }, plugins: { legend: { display: false } } } });
        }

        function createScatterChart() {
            const uniqueMainFields = [...new Set(allPolicies.map(p => p.mainField))];
            const colorPalette = ['#4e79a7', '#f28e2b', '#e15759', '#76b7b2', '#59a14f', '#edc948', '#b07aa1', '#ff9da7', '#9c755f', '#bab0ac'];
            const mainFieldColors = uniqueMainFields.reduce((acc, field, index) => {
                acc[field] = colorPalette[index % colorPalette.length];
                return acc;
            }, {});

            const datasets = uniqueMainFields.map(field => {
                const consistencyMap = { 'A': 4, 'B': 3, 'C': 2, 'D': 1 };
                const fieldData = allPolicies
                    .filter(p => p.mainField === field && consistencyMap[p.consistency])
                    .map(p => ({
                        x: consistencyMap[p.consistency] + (Math.random() - 0.5) * 0.4, // Jitter
                        y: p.score,
                        policy: p.policy
                    }));
                
                return {
                    label: field,
                    data: fieldData,
                    backgroundColor: mainFieldColors[field]
                };
            });
            
            const ctx = document.getElementById('scatterChart').getContext('2d');
            if (window.scatterChartInstance) window.scatterChartInstance.destroy();
            window.scatterChartInstance = new Chart(ctx, {
                type: 'scatter',
                data: { datasets: datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear', position: 'bottom', min: 0.5, max: 4.5,
                            ticks: { stepSize: 1, callback: function(value) { const map = {1: 'D (矛盾)', 2: 'C', 3: 'B', 4: 'A (一致)'}; return map[value] || ''; }},
                            title: { display: true, text: '過去発言との整合性' }
                        },
                        y: { title: { display: true, text: '修正評価点' } }
                    },
                    plugins: {
                        legend: { display: true, position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const policyName = context.raw.policy;
                                    return `${context.dataset.label}: ${policyName} (${context.parsed.y}点)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        /**
         * Sets the footer text.
         */
        function setFooter() {
            const footer = document.getElementById('footer-text');
            footer.textContent = `この分析は、一般社団法人日本みらい研が開発したAIを用いて算出したものであり、絶対的な評価ではない（作成日:2025年6月20日、更新日:2025年6月22日）。`;
        }
        
        // --- AI Analysis ---

        /**
         * A generic function to call the Gemini API and handle the response.
         * @param {string} prompt The prompt to send to the AI.
         */
        async function callGemini(prompt) {
            const apiKey = localStorage.getItem('googleAiApiKey');
            const resultTextDiv = document.getElementById('ai-result-text');
            const loader = document.getElementById('ai-loader');
            const runAnalysisBtn = document.getElementById('run-ai-analysis-btn');
            const askAiBtn = document.getElementById('ask-ai-btn');

            if (!apiKey) {
                resultTextDiv.style.color = 'red';
                resultTextDiv.textContent = 'エラー: AI分析を実行する前にAPIキーを保存してください。';
                return;
            }

            loader.classList.remove('hidden');
            resultTextDiv.classList.add('hidden');
            runAnalysisBtn.disabled = true;
            askAiBtn.disabled = true;

            try {
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{
                        parts: [{ text: prompt }]
                    }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || 'APIからの応答エラー');
                }

                const result = await response.json();
                const text = result.candidates[0].content.parts[0].text;
                
                resultTextDiv.style.color = 'black';
                // A simple markdown to HTML converter
                let htmlText = text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')     // Italic
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                    .replace(/^\* (.*$)/gim, '<li>$1</li>');
                
                htmlText = htmlText.replace(/<\/li><li>/g, '</li><li>');
                htmlText = htmlText.replace(/<li>/g, '<ul><li>').replace(/<\/li>/g, '</li></ul>');
                htmlText = htmlText.replace(/<\/ul>\s*<ul>/g, '');

                resultTextDiv.innerHTML = htmlText.replace(/\n/g, '<br>');

            } catch (error) {
                resultTextDiv.style.color = 'red';
                resultTextDiv.textContent = `分析中にエラーが発生しました: ${error.message}。APIキーが正しいか、またはGoogle AI Studioで有効になっているか確認してください。`;
            } finally {
                loader.classList.add('hidden');
                resultTextDiv.classList.remove('hidden');
                runAnalysisBtn.disabled = false;
                askAiBtn.disabled = false;
            }
        }

        /**
         * Handles the request for an overall analysis summary.
         */
        function handleOverallAnalysis() {
            const totalScore = allPolicies.reduce((acc, p) => acc + p.score, 0);
            const overallAvg = (totalScore / allPolicies.length).toFixed(1);
            const fieldAverages = getFieldAverages();
            const sortedFields = Object.entries(fieldAverages).sort(([, a], [, b]) => b.avg - a.avg);
            const bestField = `${sortedFields[0][0]} (${sortedFields[0][1].avg.toFixed(1)})`;
            const worstField = `${sortedFields[sortedFields.length - 1][0]} (${sortedFields[sortedFields.length - 1][1].avg.toFixed(1)})`;
            
            const highRatedPolicies = [...allPolicies].sort((a, b) => b.score - a.score).slice(0, 5);
            const lowRatedPolicies = [...allPolicies].sort((a, b) => a.score - b.score).slice(0, 5);

            const prompt = `
あなたは鋭い洞察力を持つ政治アナリストです。以下の石破内閣の政策評価データに基づいて、総合的な分析レポートをマークダウン形式で作成してください。

# データ概要
- 総合平均評価: ${overallAvg}点
- 最高評価分野: ${bestField}
- 最低評価分野: ${worstField}
- 政策項目数: ${allPolicies.length}件

# 高評価の政策例
${highRatedPolicies.map(p => `- 「${p.policy}」 (${p.score}点)`).join('\n')}

# 低評価の政策例
${lowRatedPolicies.map(p => `- 「${p.policy}」 (${p.score}点)`).join('\n')}

# 分析の構成
1.  **総合所感:** 全体的な評価と政権運営の傾向を簡潔にまとめてください。
2.  **強みと評価される点:** データから読み取れる政権の強みや、国民から評価されているであろう政策分野を具体例を挙げて分析してください。
3.  **弱みと課題:** データから読み取れる政権の弱点や、今後の課題となる政策分野を具体例を挙げて分析してください。
4.  **今後の展望:** これまでの傾向を踏まえ、今後の政権運営がどうなるか、注目すべきポイントを予測してください。
`;
            
            document.getElementById('ai-result-text').textContent = '総合分析を生成中です...';
            callGemini(prompt);
        }

        /**
         * Handles a user's specific question to the AI.
         */
        function handleUserQuestion() {
            const resultTextDiv = document.getElementById('ai-result-text');
            const userQuestion = document.getElementById('ai-question-input').value.trim();

            if (!userQuestion) {
                resultTextDiv.style.color = 'red';
                resultTextDiv.textContent = '質問内容を入力してください。';
                return;
            }
            
            // Create a simplified text representation of all policies to use as context
            const policyContext = allPolicies.map(p => {
                return `政策名: ${p.policy}, 分野: ${p.mainField}, 評価点: ${p.score}, 日付: ${p.date}, ポジティブ評価: ${p.positiveEval}, ネガティブ評価: ${p.negativeEval}`;
            }).join('\n');

            const prompt = `
あなたは日本の政治に詳しい、優秀なAIアシスタントです。以下の政策データセット全体をコンテキストとして、ユーザーからの次の質問に誠実に、そして具体的に回答してください。

# コンテキストデータ
${policyContext}

---
# ユーザーの質問:
${userQuestion}
`;
            
            document.getElementById('ai-result-text').textContent = `「${userQuestion}」について回答を生成中です...`;
            callGemini(prompt);
        }

        /**
         * Sets up all event listeners for the AI analysis modal.
         */
        function setupAiAnalysisModal() {
            const modal = document.getElementById('ai-modal');
            const openBtn = document.getElementById('aiAnalysisBtn');
            const closeBtn = document.getElementById('modal-close-btn');
            const saveApiKeyBtn = document.getElementById('save-api-key-btn');
            const apiKeyInput = document.getElementById('api-key-input');
            const apiKeyStatus = document.getElementById('api-key-status');
            const runAnalysisBtn = document.getElementById('run-ai-analysis-btn');
            const askAiBtn = document.getElementById('ask-ai-btn'); 

            // Load saved API key from localStorage
            const savedApiKey = localStorage.getItem('googleAiApiKey');
            if (savedApiKey) {
                apiKeyInput.value = savedApiKey;
                apiKeyStatus.textContent = '保存済みのAPIキーを読み込みました。';
                setTimeout(() => apiKeyStatus.textContent = '', 3000);
            }

            openBtn.addEventListener('click', () => modal.classList.remove('hidden'));
            closeBtn.addEventListener('click', () => modal.classList.add('hidden'));
            
            saveApiKeyBtn.addEventListener('click', () => {
                const key = apiKeyInput.value;
                if (key) {
                    localStorage.setItem('googleAiApiKey', key);
                    apiKeyStatus.style.color = 'green';
                    apiKeyStatus.textContent = 'APIキーを保存しました。';
                } else {
                    localStorage.removeItem('googleAiApiKey');
                    apiKeyStatus.style.color = 'red';
                    apiKeyStatus.textContent = 'APIキーを削除しました。';
                }
                setTimeout(() => apiKeyStatus.textContent = '', 3000);
            });

            runAnalysisBtn.addEventListener('click', handleOverallAnalysis);
            askAiBtn.addEventListener('click', handleUserQuestion); 
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            allPolicies = parsePolicyData(policyDataText);
            filteredPolicies = [...allPolicies];
            
            calculateAndDisplayMetrics();
            createAllCharts();
            
            setupFilters();
            setupSorting();
            setupAnalysisToggle();
            setupExcelExport();
            setupAiAnalysisModal();
            setFooter();

            updateDisplay();
        });
    </script>
</body>
</html>
